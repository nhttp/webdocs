"use strict";(self.webpackChunknhttp_webdoc=self.webpackChunknhttp_webdoc||[]).push([[1510],{4137:(e,n,t)=>{t.d(n,{Zo:()=>u,kt:()=>g});var r=t(7294);function l(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function a(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function o(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?a(Object(t),!0).forEach((function(n){l(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):a(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function s(e,n){if(null==e)return{};var t,r,l=function(e,n){if(null==e)return{};var t,r,l={},a=Object.keys(e);for(r=0;r<a.length;r++)t=a[r],n.indexOf(t)>=0||(l[t]=e[t]);return l}(e,n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)t=a[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(l[t]=e[t])}return l}var p=r.createContext({}),i=function(e){var n=r.useContext(p),t=n;return e&&(t="function"==typeof e?e(n):o(o({},n),e)),t},u=function(e){var n=i(e.components);return r.createElement(p.Provider,{value:n},e.children)},d="mdxType",c={inlineCode:"code",wrapper:function(e){var n=e.children;return r.createElement(r.Fragment,{},n)}},m=r.forwardRef((function(e,n){var t=e.components,l=e.mdxType,a=e.originalType,p=e.parentName,u=s(e,["components","mdxType","originalType","parentName"]),d=i(t),m=l,g=d["".concat(p,".").concat(m)]||d[m]||c[m]||a;return t?r.createElement(g,o(o({ref:n},u),{},{components:t})):r.createElement(g,o({ref:n},u))}));function g(e,n){var t=arguments,l=n&&n.mdxType;if("string"==typeof e||l){var a=t.length,o=new Array(a);o[0]=m;var s={};for(var p in n)hasOwnProperty.call(n,p)&&(s[p]=n[p]);s.originalType=e,s[d]="string"==typeof e?e:l,o[1]=s;for(var i=2;i<a;i++)o[i]=t[i];return r.createElement.apply(null,o)}return r.createElement.apply(null,t)}m.displayName="MDXCreateElement"},5193:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>p,contentTitle:()=>o,default:()=>c,frontMatter:()=>a,metadata:()=>s,toc:()=>i});var r=t(7462),l=(t(7294),t(4137));const a={sidebar_position:1},o="Routing Controller",s={unversionedId:"3rd-party-lib/routing-controller",id:"3rd-party-lib/routing-controller",title:"Routing Controller",description:"Make Controller as Router with simple Decorators.",source:"@site/docs/3rd-party-lib/routing-controller.md",sourceDirName:"3rd-party-lib",slug:"/3rd-party-lib/routing-controller",permalink:"/docs/3rd-party-lib/routing-controller",draft:!1,editUrl:"https://github.com/nhttp/webdocs/edit/master/docs/3rd-party-lib/routing-controller.md",tags:[],version:"current",sidebarPosition:1,frontMatter:{sidebar_position:1},sidebar:"tutorialSidebar",previous:{title:"rev.waitUntil",permalink:"/docs/request-event/wait-until"},next:{title:"Class Validator",permalink:"/docs/3rd-party-lib/class-validator"}},p={},i=[{value:"Import",id:"import",level:3},{value:"Deno",id:"deno",level:4},{value:"Deno npm",id:"deno-npm",level:4},{value:"Node / Bun",id:"node--bun",level:4},{value:"tsconfig (bun/node)",id:"tsconfig-bunnode",level:4},{value:"Usage",id:"usage",level:3},{value:"@Controller",id:"controller",level:3},{value:"@Method",id:"method",level:3},{value:"@Wares",id:"wares",level:3},{value:"@Upload",id:"upload",level:3},{value:"@Status",id:"status",level:3},{value:"@Header",id:"header",level:3},{value:"@Type",id:"type",level:3},{value:"@View",id:"view",level:3},{value:"app.engine",id:"appengine",level:4},{value:"@Jsx",id:"jsx",level:3},{value:"app.engine",id:"appengine-1",level:4}],u={toc:i},d="wrapper";function c(e){let{components:n,...t}=e;return(0,l.kt)(d,(0,r.Z)({},u,t,{components:n,mdxType:"MDXLayout"}),(0,l.kt)("h1",{id:"routing-controller"},"Routing Controller"),(0,l.kt)("p",null,"Make Controller as Router with simple Decorators."),(0,l.kt)("h3",{id:"import"},"Import"),(0,l.kt)("h4",{id:"deno"},"Deno"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},'import {...} from "https://deno.land/x/nhttp@1.2.9/lib/controller.ts";\n')),(0,l.kt)("h4",{id:"deno-npm"},"Deno npm"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},'import {...} from "npm:nhttp-land@1.2.9/controller";\n')),(0,l.kt)("h4",{id:"node--bun"},"Node / Bun"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},'import {...} from "nhttp-land/controller";\n// or\n// const {...} = require("nhttp-land/controller");\n')),(0,l.kt)("h4",{id:"tsconfig-bunnode"},"tsconfig (bun/node)"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},'{\n  "compilerOptions": {\n    "types": ["bun-types"],\n    "moduleResolution": "nodenext",\n    "experimentalDecorators": true,\n    "target": "ES5",\n    "lib": [\n      "DOM",\n      "DOM.Iterable",\n      "ESNext"\n    ]\n  },\n}\n')),(0,l.kt)("h3",{id:"usage"},"Usage"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},'import { nhttp, RequestEvent } from "https://deno.land/x/nhttp@1.2.9/mod.ts";\nimport { Get, Controller } from "https://deno.land/x/nhttp@1.2.9/lib/controller.ts";\n\n@Controller("/hello")\nclass HelloController {\n\n  @Get("/")\n  hello(rev: RequestEvent) {\n    console.log(rev.url);\n    return "Hello, World";\n  }\n\n}\n\nconst app = nhttp();\n\napp.use("/api/v1", new UserController());\n// or multi controllers\n// app.use("/api/v1", [new UserController(), new HomeController()]);\n\napp.listen(8000);\n')),(0,l.kt)("h3",{id:"controller"},"@Controller"),(0,l.kt)("p",null,"Controller decorators."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},'@Controller()\n// or\n@Controller("/user")\n// or\n@Controller("/user", ...middlewares);\n')),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},'@Controller("/user");\nclass HelloController {...}\n')),(0,l.kt)("h3",{id:"method"},"@","[Method]"),(0,l.kt)("p",null,"Method Decorators. ",(0,l.kt)("inlineCode",{parentName:"p"},"Get | Post | Delete")," and more methods."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"@[Method](path_string);\n")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},'@Controller("/user");\nclass HelloController {\n\n  // GET/user/123\n  @Get("/:id")\n  findById(rev: RequestEvent) {...}\n\n  // POST/user\n  @Post("/")\n  create(rev: RequestEvent) {...}\n}\n')),(0,l.kt)("h3",{id:"wares"},"@Wares"),(0,l.kt)("p",null,"Middleware decorators."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"@Wares(...middlewares);\n")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},'class UserMiddleware {\n  use(rev: RequestEvent, next: NextFunction) {\n    rev.user = "john";\n    return next();\n  }\n}\n')),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},'@Controller("/user");\nclass HelloController {\n\n  @Wares(UserMiddleware)\n  @Get("/")\n  getUser(rev: RequestEvent) {\n    return rev.user;\n    // => john\n  }\n\n}\n')),(0,l.kt)("h3",{id:"upload"},"@Upload"),(0,l.kt)("p",null,"Upload decorators. related to ",(0,l.kt)("a",{parentName:"p",href:"https://nhttp.deno.dev/docs/usage/upload"},"Upload Middleware")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"@Upload(config);\n")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},'@Controller("/user");\nclass HelloController {\n\n  @Upload({ name: "image" })\n  @Post("/")\n  hello(rev: RequestEvent) {\n    console.log(rev.file);\n    return "success upload";\n  }\n\n}\n')),(0,l.kt)("h3",{id:"status"},"@Status"),(0,l.kt)("p",null,"Status decorators. set statusCode in decorators."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"@Status(code);\n")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},'@Controller("/user");\nclass HelloController {\n\n  @Status(201)\n  @Post("/")\n  hello(rev: RequestEvent) {\n    return "success save with status " + rev.response.statusCode;\n  }\n\n}\n')),(0,l.kt)("h3",{id:"header"},"@Header"),(0,l.kt)("p",null,"Header decorators. set Header in decorators."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"@Header(key, val);\n@Header(obj);\n")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},'@Controller("/user");\nclass HelloController {\n\n  @Header("name", "john")\n  @Get("/")\n  hello(rev: RequestEvent) {\n    return "hello";\n  }\n\n}\n')),(0,l.kt)("h3",{id:"type"},"@Type"),(0,l.kt)("p",null,"Type decorators. set Content-Type in decorators."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"@Type(contentType);\n")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},'@Controller("/user");\nclass HelloController {\n\n  @Type("html")\n  @Get("/")\n  hello(rev: RequestEvent) {\n    return "<h1>Hello, World</h1>";\n  }\n\n}\n')),(0,l.kt)("h3",{id:"view"},"@View"),(0,l.kt)("p",null,"View decorators. set View in decorators. requires ",(0,l.kt)("inlineCode",{parentName:"p"},"app.engine")," configs."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"@View(name);\n")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},'@Controller("/user");\nclass HelloController {\n\n  @View("index")\n  @Get("/")\n  hello(rev: RequestEvent) {\n    // set params\n    return { title: "Hello World" };\n  }\n\n}\n')),(0,l.kt)("h4",{id:"appengine"},"app.engine"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},'import ejs from "npm:ejs";\n\napp.engine(ejs.renderFile, { base: "views", ext: "ejs" });\n')),(0,l.kt)("h3",{id:"jsx"},"@Jsx"),(0,l.kt)("p",null,"Jsx decorators. requires ",(0,l.kt)("inlineCode",{parentName:"p"},"app.engine")," to React / Preact."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"@Jsx();\n")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},'@Controller("/user");\nclass HelloController {\n\n  @Jsx()\n  @Get("/")\n  hello(rev: RequestEvent) {\n    // set params\n    // rev.response.params = { title: "Hello Jsx" };\n\n    // return as jsx\n    return <h1>Hello, Jsx</h1>;\n  }\n\n}\n')),(0,l.kt)("h4",{id:"appengine-1"},"app.engine"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},'// @deno-types="npm:@types/react"\nimport React from "npm:react";\n// @deno-types="npm:@types/react-dom/server"\nimport { renderToString } from "npm:react-dom/server";\n\napp.engine(renderToString);\n// or stream\n// app.engine(renderToReadableStream);\n')),(0,l.kt)("p",null,"Or with complex html."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"app.engine((elem, params) => {\n  return `\n    <!DOCTYPE html>\n    <html>\n      <head>\n        <title>${params.title}</title>\n      </head>\n      <body>\n        ${renderToString(elem)}\n      </body>\n    </html>\n  `;\n});\n")))}c.isMDXComponent=!0}}]);